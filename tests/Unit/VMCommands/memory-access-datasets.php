<?php

use JackVMTranslator\Enums\MemorySegment;
use JackVMTranslator\Enums\MemoryAccessAction;

$pushActions = [
    MemoryAccessAction::PUSH_ACTION(),
    [
        [
            MemorySegment::LOCAL_SEGMENT(),
            10,
            <<<EOF
                @10
                D=A
                @LCL
                A=D+M
                D=M
                EOF,
        ],
        [
            MemorySegment::ARGUMENT_SEGMENT(),
            5,
            <<<EOF
                @5
                D=A
                @ARG
                A=D+M
                D=M
                EOF,
        ],
        [
            MemorySegment::THIS_SEGMENT(),
            1,
            <<<EOF
                @THIS
                A=M+1
                D=M
                EOF,
        ],
        [
            MemorySegment::THAT_SEGMENT(),
            0,
            <<<EOF
                @THAT
                A=M
                D=M
                EOF,
        ],
        [
            MemorySegment::CONSTANT_SEGMENT(),
            123,
            <<<EOF
                @123
                D=A
                EOF,
        ],
        [
            MemorySegment::STATIC_SEGMENT(),
            55,
            <<<EOF
                @SomeFile.55
                D=M
                EOF,
        ],
        [
            MemorySegment::TEMP_SEGMENT(),
            4,
            <<<EOF
                @R9
                D=M
                EOF,
        ],
        [
            MemorySegment::POINTER_SEGMENT(),
            0,
            <<<EOF
                @THIS
                D=M
                EOF,
        ],
        [
            MemorySegment::POINTER_SEGMENT(),
            1,
            <<<EOF
                @THAT
                D=M
                EOF,
        ],
    ],
];

$popActions = [
    MemoryAccessAction::POP_ACTION(),
    [
        [
            MemorySegment::LOCAL_SEGMENT(),
            10,
            <<<EOF
                @R8
                M=D
                @10
                D=A
                @LCL
                A=D+M
                D=A
                @R9
                M=D
                @R8
                D=M
                @R9
                A=M
                M=D
                EOF,
        ],
        [
            MemorySegment::ARGUMENT_SEGMENT(),
            5,
            <<<EOF
                @R8
                M=D
                @5
                D=A
                @ARG
                A=D+M
                D=A
                @R9
                M=D
                @R8
                D=M
                @R9
                A=M
                M=D
                EOF,
        ],
        [
            MemorySegment::THIS_SEGMENT(),
            1,
            <<<EOF
                @THIS
                A=M+1
                M=D
                EOF,
        ],
        [
            MemorySegment::THAT_SEGMENT(),
            0,
            <<<EOF
                @THAT
                A=M
                M=D
                EOF,
        ],
        [
            MemorySegment::STATIC_SEGMENT(),
            55,
            <<<EOF
                @SomeFile.55
                M=D
                EOF,
        ],
        [
            MemorySegment::TEMP_SEGMENT(),
            4,
            <<<EOF
                @R9
                M=D
                EOF,
        ],
        [
            MemorySegment::POINTER_SEGMENT(),
            0,
            <<<EOF
                @THIS
                M=D
                EOF,
        ],
        [
            MemorySegment::POINTER_SEGMENT(),
            1,
            <<<EOF
                @THAT
                M=D
                EOF,
        ],
    ],
];

dataset('memory_access_command_tests', [
    [
        ...$pushActions,
    ],
    [
        ...$popActions,
    ],
]);